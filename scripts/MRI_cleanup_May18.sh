#!/bin/bash
subjlist='06IND001B_R3 06IND003G_R3 06IND007G_R2 06IND007G_R3 06IND012B_R3 06IND014B_R3 06IND016G_R3 06IND017B_R2 06IND017B_R3 06IND027G_R3 06IND030G_R2 06IND030G_R3 06IND033B_R2 06IND045G_R3 06IND047B_R3 06IND049G_R3 06IND066B_R3 06IND067B_R3 06IND073B_R2 06IND073B_R3 06IND076G_R2 06IND076G_R3 06IND078G_R3 06IND083G_R2 06IND083G_R3 06IND108G_R3 06IND118G_R3 06IND120G_R3 06IND121B_R3 06IND131B_R3 06IND132B_R3 06IND137G_R3 06IND142B_R3 06IND144B_R3 06IND149G_R3 06IND156B_R3 06IND160B_R3 06IND161G_R3 06IND166B_R3 06IND168B_R3 06IND170B_R3 06IND172G_R3 06IND203G_R2 06IND203G_R3 06IND204B_R2 06IND204B_R3 06IND206B_R2 06IND206B_R3 06IND207B_R2 06IND207B_R3 06IND211G_R2 06IND211G_R3 06IND215G_R2 06IND217B_R2 06IND217B_R3 06IND227G_R2 06IND227G_R3 06IND256G_R2 06IND256G_R3 06IND262B_R2 06IND262B_R3 06IND267B_R2 06IND271G_R2 06IND271G_R3 06IND277B_R2 06IND277B_R3 06IND278G_R2 06IND278G_R3 06IND279G_R2 06IND279G_R3 06IND301G_R2 06IND301G_R3 06IND303B_R2 06IND305B_R3 06IND306G_R2 06IND306G_R3 06IND309G_R2 06IND309G_R3 06IND311B_R3 06IND318G_R2 06IND318G_R3 06IND321G_R2 06IND321G_R3 06IND322G_R2 06IND322G_R3 06IND325B_R2 06IND325B_R3 06IND327G_R2 06IND327G_R3 06IND328G_R2 06IND328G_R3 06IND334B_R2 06IND334B_R3 06IND335B_R2 06IND335B_R3 06IND336B_R2 06IND336B_R3 06IND337G_R2 06IND337G_R3 06IND353B_R2 06IND353B_R3 06IND354B_R2 06IND354B_R3 06IND355G_R2 06IND355G_R3 06IND356G_R2 06IND356G_R3 06IND360B_R2 06IND360B_R3 06IND361B_R2 06IND361B_R3 06IND374B_R2 06IND374B_R3 06IND387B_R2 06IND387B_R3 09IND002B_R3 09IND004G_R3 09IND005G_R3 09IND024G_R2 09IND024G_R3 09IND025B_R3 09IND029G_R3 09IND031G_R3 09IND032B_R2 09IND032B_R3 09IND038G_R3 09IND039G_R3 09IND043G_R2 09IND043G_R3 09IND051B_R3 09IND052G_R2 09IND052G_R3 09IND053G_R3 09IND054G_R3 09IND058G_R2 09IND058G_R3 09IND059G_R2 09IND059G_R3 09IND060B_R3 09IND070B_R3 09IND072B_R2 09IND082G_R3 09IND106B_R3 09IND109B_R3 09IND110G_R3 09IND114B_R3 09IND116B_R3 09IND119B_R3 09IND122B_R3 09IND133G_R3 09IND136B_R3 09IND151G_R3 09IND152G_R3 09IND154G_R3 09IND157G_R3 09IND167G_R3 09IND201B_R3 09IND202B_R2 09IND209B_R2 09IND209B_R3 09IND210B_R2 09IND210B_R3 09IND213B_R2 09IND213B_R3 09IND214B_R2 09IND214B_R3 09IND216G_R3 09IND218G_R2 09IND218G_R3 09IND240G_R3 09IND241B_R2 09IND241B_R3 09IND246B_R2 09IND246B_R3 09IND249G_R2 09IND249G_R3 09IND252G_R2 09IND252G_R3 09IND253B_R2 09IND253B_R3 09IND261B_R2 09IND261B_R3 09IND264B_R2 09IND264B_R3 09IND265G_R2 09IND265G_R3 09IND269B_R2 09IND269B_R3 09IND270G_R2 09IND270G_R3 09IND273G_R2 09IND273G_R3 09IND275G_R2 09IND275G_R3 09IND302B_R2 09IND302B_R3 09IND304B_R2 09IND304B_R3 09IND312B_R3 09IND314G_R2 09IND314G_R3 09IND315B_R2 09IND315B_R3 09IND350G_R2 09IND350G_R3 09IND352B_R2 09IND352B_R3 09IND357B_R3 09IND358G_R2 09IND358G_R3 09IND362B_R2 09IND363B_R2 09IND363B_R3 09IND364B_R2 09IND364B_R3 09IND365B_R2 09IND365B_R3 09IND369B_R2 09IND369B_R3 09IND370G_R2 09IND370G_R3 09IND371G_R3 09IND377B_R2 09IND377B_R3 09IND382B_R2 09IND384B_R2 09IND384B_R3 09IND385B_R2 09IND386G_R2 09IND386G_R3 09IND390B_R2 09IND390B_R3'
for subj in $subjlist
do

  cd  /Volumes/PegasusDDLab/IndiaY2Seg
  #
  # # Extract a mask for the skull with no background pixels outside of the skull
  # 3dcalc -a ${subj}_neurologicalHighRes2.nii -prefix ${subj}_mask_400.nii -expr 'step(a-1500)'
  # # Fill the mask to skull / brain
  # 3dinfill -blend SOLID -prefix ${subj}_mask_filled.nii -minhits 2 -input  ${subj}_mask_400.nii
  # # Clip the image to just the region defined by the mask generated above
  # 3dcalc -a ${subj}_neurologicalHighRes2.nii  -b ${subj}_mask_filled.nii -prefix ${subj}_final_Masked.nii -expr '(a*b)'
  # # Multiply by iteslf
  # 3dcalc -a ${subj}_final_Masked.nii -b ${subj}_final_Masked.nii -expr 'a*b' -prefix ${subj}_enhanced.nii

  #Then segment using vinces new script (April 28 2019) and should align to ACPC
  mkdir -p /Volumes/PegasusDDLab/IndiaY2Seg/${subj}/

  bash autoSegment20190428.sh -t /Volumes/PegasusDDLab/India_other_rounds/india_highRes/${subj}_neurologicalHighRes.nii.gz -o /Volumes/PegasusDDLab/IndiaY2Seg/${subj}/ -s 0.5 -c 3 -b -m

done
